//Insert data
db.employee.insert({ "_id" : ObjectId("6009787adbe7dd3890ba78ce"), "empNo" : 7876, "empName" : "ADAMS", "job" : "CLERK", "mgr" : 7788, "hireDate" : "1987-05-23", "sal" : 1100, "comm" : 0, "department" : { "deptNo" : 20, "deptName" : "RESEARCH", "loc" : "DALLAS" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:02.891Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:02.891Z"), "storeId" : "10001"  });
db.employee.insert({ "_id" : ObjectId("6009787bdbe7dd3890ba78cf"), "empNo" : 7499, "empName" : "ALLEN", "job" : "SALESMAN", "mgr" : 7698, "hireDate" : "1981-02-20", "sal" : 1600, "comm" : 300, "department" : { "deptNo" : 30, "deptName" : "SALES", "loc" : "CHICAGO" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:03.006Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:03.006Z"), "storeId" : "10001"  });
db.employee.insert({ "_id" : ObjectId("6009787bdbe7dd3890ba78d0"), "empNo" : 7698, "empName" : "BLAKE", "job" : "MANAGER", "mgr" : 7839, "hireDate" : "1981-05-01", "sal" : 2850, "comm" : 0, "department" : { "deptNo" : 30, "deptName" : "SALES", "loc" : "CHICAGO" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:03.036Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:03.036Z"), "storeId" : "10001"  });
db.employee.insert({ "_id" : ObjectId("6009787bdbe7dd3890ba78d1"), "empNo" : 7782, "empName" : "CLARK", "job" : "MANAGER", "mgr" : 7839, "hireDate" : "1981-06-09", "sal" : 2450, "comm" : 0, "department" : { "deptNo" : 10, "deptName" : "ACCOUNTING", "loc" : "NEW YORK" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:03.055Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:03.055Z"), "storeId" : "10001"  });
db.employee.insert({ "_id" : ObjectId("6009787bdbe7dd3890ba78d2"), "empNo" : 7902, "empName" : "FORD", "job" : "ANALYST", "mgr" : 7566, "hireDate" : "1981-12-03", "sal" : 3000, "comm" : 0, "department" : { "deptNo" : 20, "deptName" : "RESEARCH", "loc" : "DALLAS" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:03.080Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:03.080Z"), "storeId" : "10001"  });
db.employee.insert({ "_id" : ObjectId("6009787bdbe7dd3890ba78d3"), "empNo" : 7900, "empName" : "JAMES", "job" : "CLERK", "mgr" : 7698, "hireDate" : "1981-12-03", "sal" : 950, "comm" : 0, "department" : { "deptNo" : 30, "deptName" : "SALES", "loc" : "CHICAGO" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:03.098Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:03.098Z"), "storeId" : "10001"  });
db.employee.insert({ "_id" : ObjectId("6009787bdbe7dd3890ba78d4"), "empNo" : 7566, "empName" : "JONES", "job" : "MANAGER", "mgr" : 7839, "hireDate" : "1981-04-02", "sal" : 2975, "comm" : 0, "department" : { "deptNo" : 20, "deptName" : "RESEARCH", "loc" : "DALLAS" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:03.116Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:03.116Z"), "storeId" : "10001"  });
db.employee.insert({ "_id" : ObjectId("6009787bdbe7dd3890ba78d5"), "empNo" : 7839, "empName" : "KING", "job" : "PRESIDENT", "mgr" : 0, "hireDate" : "1981-11-17", "sal" : 5000, "comm" : 0, "department" : { "deptNo" : 10, "deptName" : "ACCOUNTING", "loc" : "NEW YORK" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:03.133Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:03.133Z"), "storeId" : "10001"  });
db.employee.insert({ "_id" : ObjectId("6009787bdbe7dd3890ba78d6"), "empNo" : 7654, "empName" : "MARTIN", "job" : "SALESMAN", "mgr" : 7698, "hireDate" : "1981-09-28", "sal" : 1250, "comm" : 1400, "department" : { "deptNo" : 30, "deptName" : "SALES", "loc" : "CHICAGO" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:03.152Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:03.152Z"), "storeId" : "10001"  });
db.employee.insert({ "_id" : ObjectId("6009787bdbe7dd3890ba78d7"), "empNo" : 7934, "empName" : "MILLER", "job" : "CLERK", "mgr" : 7782, "hireDate" : "1982-01-23", "sal" : 1300, "comm" : 0, "department" : { "deptNo" : 10, "deptName" : "ACCOUNTING", "loc" : "NEW YORK" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:03.171Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:03.171Z"), "storeId" : "10001"  });
db.employee.insert({ "_id" : ObjectId("6009787bdbe7dd3890ba78d8"), "empNo" : 7788, "empName" : "SCOTT", "job" : "ANALYST", "mgr" : 7566, "hireDate" : "1987-04-19", "sal" : 3000, "comm" : 0, "department" : { "deptNo" : 20, "deptName" : "RESEARCH", "loc" : "DALLAS" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:03.187Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:03.187Z"), "storeId" : "10001"  });
db.employee.insert({ "_id" : ObjectId("6009787bdbe7dd3890ba78d9"), "empNo" : 7369, "empName" : "SMITH", "job" : "CLERK", "mgr" : 7902, "hireDate" : "1980-12-17", "sal" : 800, "comm" : 0, "department" : { "deptNo" : 20, "deptName" : "RESEARCH", "loc" : "DALLAS" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:03.203Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:03.203Z"), "storeId" : "10001"  });
db.employee.insert({ "_id" : ObjectId("6009787bdbe7dd3890ba78da"), "empNo" : 7844, "empName" : "TURNER", "job" : "SALESMAN", "mgr" : 7698, "hireDate" : "1981-09-08", "sal" : 1500, "comm" : 0, "department" : { "deptNo" : 30, "deptName" : "SALES", "loc" : "CHICAGO" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:03.219Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:03.219Z"), "storeId" : "10001"  });
db.employee.insert({ "_id" : ObjectId("6009787bdbe7dd3890ba78db"), "empNo" : 7521, "empName" : "WARD", "job" : "SALESMAN", "mgr" : 7698, "hireDate" : "1981-02-22", "sal" : 1250, "comm" : 500, "department" : { "deptNo" : 30, "deptName" : "SALES", "loc" : "CHICAGO" }, "markForDelete" : false, "createdBy" : "jmeter", "createdDate" : ISODate("2021-01-21T12:50:03.260Z"), "updatedBy" : "jmeter", "updatedDate" : ISODate("2021-01-21T12:50:03.260Z"), "storeId" : "10001"  });

//Remove data data
db.employee.remove({"empNo" : NumberInt(7876)});
db.employee.remove({});

//Find data by empNo
db.employee.find({"empNo" : 7902}).pretty();

//Find data by job with sort
db.employee.find({"job" : "SALESMAN"}).sort({empNo:-1});

//Find data by job and show only particular fields
db.employee.find({"job" : "SALESMAN"},{"_id":0, empNo:1, empName:1}).pretty();

//Find data by job and print using forEach
db.employee.find({"job" : "SALESMAN"}).forEach(function(doc){
print(doc.empNo+"|"+doc.empName);
});

//Update data based on empNo
db.employee.update({"empNo" : 7902},{$set: {"empName" : "Name Test Ganti", "updatedDate": new Date(), "updatedBy": "Saya Sendiri"}}, {multi: true});
db.employee.find({"empNo" : 7902}).pretty();

//Get distinc job & deptName
db.employee.distinct("job");
db.employee.distinct("department.deptName");

//Aggregate data to get total employee for each department
db.employee.aggregate([
    { $match : { "empNo" : {$gte:1}} },
    {"$group" : {_id:"$department.deptName", total:{$sum:1}}}
]);

//Find data show only particular fields
db.employee.aggregate(
   [
      {
         $project: {
            "_id":0, empNo: 1, empName: 1,
         }
      }
   ]
);

//Create index and drop index
db.employee.createIndex({ "empNo": 1, "markForDelete" : 1}, { unique: true, name:"empNo_1_markForDelete_1_unique", background:true });
db.employee.dropIndex("empNo_1_markForDelete_1_unique");
 
db.employee.createIndex({ "empNo": 1, "markForDelete" : 1}, {name:"empNo_1_markForDelete_1", background:true });
db.employee.dropIndex("empNo_1_markForDelete_1");

db.employee.createIndex({ "empName": 1, "markForDelete" : 1}, {name:"empName_1_markForDelete_1", background:true });
db.employee.createIndex( { "empName": 1, "markForDelete" : 1},{ name:"empName_1_markForDelete_1_collation_strength_2",collation: { locale: 'en', strength: 2 }, background:true});

db.employee.dropIndex("empName_1_markForDelete_1");
db.employee.dropIndex("empName_1_markForDelete_1_collation_strength_2");

--Expalin Query
db.employee.find({"empNo" : 7902}).explain();
db.employee.find({empName:/lar/i}).explain();